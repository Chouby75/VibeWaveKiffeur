<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plan Strat√©gique : Syst√®me de Score Dynamique</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
            margin: 0;
            padding: 2rem;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: #fff;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            border: 1px solid #e9ecef;
        }
        h1, h2, h3 {
            color: #212529;
            font-weight: 600;
            margin-top: 1.5em;
            margin-bottom: 0.8em;
        }
        h1 {
            font-size: 2.2rem;
            border-bottom: 2px solid #dee2e6;
            padding-bottom: 0.5rem;
            margin-top: 0;
        }
        h2 {
            font-size: 1.75rem;
            border-bottom: 1px solid #e9ecef;
            padding-bottom: 0.4rem;
        }
        h3 {
            font-size: 1.4rem;
        }
        p, li {
            font-size: 1rem;
            color: #495057;
        }
        ul, ol {
            padding-left: 1.5rem;
        }
        li {
            margin-bottom: 0.5rem;
        }
        code {
            background-color: #e9ecef;
            padding: 0.2em 0.4em;
            margin: 0;
            font-size: 85%;
            border-radius: 3px;
            font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
        }
        .section {
            margin-bottom: 2.5rem;
        }
        .emoji {
            margin-right: 0.75rem;
        }
        .alert {
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 6px;
            border-left-width: 5px;
            border-left-style: solid;
        }
        .alert-info {
            background-color: #cff4fc;
            border-color: #0dcaf0;
            color: #055160;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1><span class="emoji">üìú</span>Plan Strat√©gique : Syst√®me de Score Dynamique</h1>

        <div class="section" id="understanding">
            <h2><span class="emoji">üéØ</span>1. Compr√©hension de l'Objectif</h2>
            <p>
                L'objectif est d'impl√©menter un <strong>syst√®me de score dynamique</strong> pour enrichir l'exp√©rience de jeu. Plut√¥t qu'un simple score bas√© sur l'√©limination d'ennemis, ce syst√®me introduira une m√©canique de "prise de risque/r√©compense". Le joueur pourra utiliser des tours sp√©cifiques, dites de "buff", qui n'infligent pas de d√©g√¢ts mais augmentent la valeur en points des ennemis touch√©s. Le score final d'un ennemi sera la somme de sa valeur de base et des bonus accumul√©s, ajout√©e au score global du joueur au moment de la destruction de l'ennemi.
            </p>
        </div>

        <div class="section" id="investigation">
            <h2><span class="emoji">üïµÔ∏è</span>2. Investigation & Analyse</h2>
            <p>
                Pour int√©grer ce syst√®me de mani√®re robuste, une analyse des composants cl√©s du projet est n√©cessaire.
            </p>
            <ol>
                <li>
                    <strong>Gestion de l'√©tat global du jeu :</strong>
                    <ul>
                        <li>Le fichier <code>autoloads/global.gd</code> est le candidat id√©al pour stocker le score du joueur (<code>player_score</code>). Il faut v√©rifier sa structure pour y ajouter la variable et une fonction de mise √† jour (ex: <code>add_to_score(amount)</code>).</li>
                    </ul>
                </li>
                <li>
                    <strong>Analyse de l'entit√© "Ennemi" :</strong>
                    <ul>
                        <li>Le script principal <code>entities/enemies/enemy.gd</code> doit √™tre examin√©. Il faudra y ajouter les variables <code>base_point_value</code> et <code>bonus_points</code>.</li>
                        <li>Il est crucial d'identifier la logique de mort de l'ennemi (probablement quand <code>health <= 0</code>) pour y d√©clencher l'envoi du score.</li>
                        <li>La meilleure approche pour communiquer le score est un <strong>signal Godot</strong> (ex: <code>signal died(total_points)</code>) qui sera √©mis par l'ennemi juste avant sa suppression (<code>queue_free()</code>).</li>
                    </ul>
                </li>
                <li>
                    <strong>Analyse du syst√®me d'attaque des tours :</strong>
                    <ul>
                        <li>Il faut comprendre comment les projectiles (<code>entities/projectiles/</code>) interagissent avec les ennemis. L'interaction se fait probablement via une d√©tection de collision qui appelle une fonction comme <code>take_damage</code> sur l'ennemi.</li>
                        <li>Pour la tour de "buff", il faudra cr√©er un nouveau type de projectile qui, au lieu d'appeler <code>take_damage</code>, appellera une nouvelle fonction sur l'ennemi : <code>increase_bonus_points(amount)</code>.</li>
                    </ul>
                </li>
                <li>
                    <strong>Int√©gration √† l'interface utilisateur (UI) :</strong>
                    <ul>
                        <li>Le HUD principal (<code>ui/hud.tscn</code> et <code>ui/hud.gd</code>) devra √™tre modifi√© pour afficher le score actuel. Un nouveau <code>Label</code> sera ajout√© et son texte sera mis √† jour via un signal provenant de <code>global.gd</code> (ex: <code>score_updated</code>) pour d√©coupler la logique de l'affichage.</li>
                    </ul>
                </li>
            </ol>
        </div>

        <div class="section" id="approach">
            <h2><span class="emoji">üó∫Ô∏è</span>3. Approche Strat√©gique Propos√©e</h2>
            <p>
                L'impl√©mentation sera structur√©e en plusieurs phases pour une int√©gration progressive et contr√¥l√©e.
            </p>
            <h3>Phase 1 : Mise en place des fondations du score</h3>
            <ol>
                <li><strong>Variable Globale :</strong> Ajouter <code>var player_score = 0</code> et un signal <code>score_updated(new_score)</code> dans <code>global.gd</code>.</li>
                <li><strong>Propri√©t√©s de l'Ennemi :</strong> Ajouter <code>export var base_point_value = 10</code> et <code>var bonus_points = 0</code> au script <code>enemy.gd</code>.</li>
                <li><strong>Affichage UI :</strong> Ajouter un Label "Score" dans <code>hud.tscn</code> et le connecter au signal <code>score_updated</code> de <code>global.gd</code> pour rafra√Æchir l'affichage.</li>
            </ol>

            <h3>Phase 2 : M√©canisme d'attribution des points</h3>
            <ol>
                <li><strong>Signal de Mort :</strong> D√©clarer <code>signal died(points)</code> dans <code>enemy.gd</code>.</li>
                <li><strong>Logique d'√âmission :</strong> Dans la fonction o√π la vie de l'ennemi est g√©r√©e, lorsque la vie atteint z√©ro, calculer <code>var total_points = base_point_value + bonus_points</code> et √©mettre le signal : <code>emit_signal("died", total_points)</code>.</li>
                <li><strong>Connexion du Signal :</strong> Dans le script qui instancie les ennemis (probablement un "spawner" dans <code>maps/</code>), connecter le signal <code>died</code> de chaque nouvel ennemi √† une fonction dans <code>global.gd</code> qui mettra √† jour le score.</li>
            </ol>

            <h3>Phase 3 : Cr√©ation de la tour de "Buff"</h3>
            <ol>
                <li><strong>Nouvelle Tour :</strong> Cr√©er une nouvelle sc√®ne de tour (ex: <code>support_tower.tscn</code>) et son script, en copiant une tour existante comme base.</li>
                <li><strong>Nouvelle Fonction sur l'Ennemi :</strong> Ajouter <code>func increase_bonus_points(amount): bonus_points += amount</code> dans <code>enemy.gd</code>.</li>
                <li><strong>Projectile de Buff :</strong> Cr√©er un projectile qui, lors de l'impact avec un ennemi, appelle <code>increase_bonus_points</code> au lieu de faire des d√©g√¢ts.</li>
                <li><strong>Int√©gration au Menu :</strong> Ajouter la nouvelle tour au menu de construction (<code>ui/tower_popup.gd</code>) pour que le joueur puisse la s√©lectionner.</li>
            </ol>
            
            <h3>Phase 4 : Am√©lioration de l'exp√©rience utilisateur (Feedback)</h3>
             <ol>
                <li><strong>Feedback Visuel :</strong> Quand un ennemi est "buff√©", d√©clencher un effet visuel simple (ex: un clignotement de couleur via un <code>Tween</code>) pour informer le joueur.</li>
                <li><strong>Texte Flottant :</strong> Lors de la destruction d'un ennemi, instancier une petite animation de texte √† sa position indiquant les points gagn√©s (ex: "+50").</li>
            </ol>
        </div>

        <div class="section" id="verification">
            <h2><span class="emoji">‚úÖ</span>4. Strat√©gie de V√©rification</h2>
            <p>
                La validation se fera par des tests en jeu pour chaque aspect de la fonctionnalit√© :
            </p>
            <ul>
                <li><strong>Sc√©nario 1 (Baseline) :</strong> D√©truire un ennemi avec une tour standard. V√©rifier que le score augmente uniquement de la <code>base_point_value</code> de l'ennemi.</li>
                <li><strong>Sc√©nario 2 (Buff) :</strong> Construire une tour de "buff". La laisser tirer plusieurs fois sur un ennemi.</li>
                <li><strong>Sc√©nario 3 (Cash-in) :</strong> D√©truire l'ennemi "buff√©" avec une tour standard. V√©rifier que le score augmente de <code>base_point_value + bonus_points</code>, o√π les points bonus correspondent au nombre de tirs de la tour de buff.</li>
                <li><strong>V√©rification UI :</strong> S'assurer que le score affich√© dans le HUD est mis √† jour en temps r√©el et correspond √† la valeur dans <code>global.gd</code>.</li>
            </ul>
        </div>

        <div class="section" id="challenges">
            <h2><span class="emoji">‚ö†Ô∏è</span>5. D√©fis Anticip√©s</h2>
            <div class="alert alert-info">
                <p><strong>√âquilibrage de la m√©canique :</strong> Le d√©fi majeur sera de nature conceptuelle. La tour de "buff" doit offrir un compromis int√©ressant. Si elle est trop ch√®re ou si le bonus est trop faible, elle ne sera jamais utilis√©e. Si elle est trop efficace, elle pourrait devenir la seule strat√©gie viable. Des tests approfondis seront n√©cessaires pour ajuster son co√ªt, sa cadence de tir et la valeur du bonus qu'elle conf√®re.</p>
                <p><strong>Clart√© pour le joueur :</strong> La m√©canique doit √™tre intuitive. Le r√¥le de la tour de "buff" et l'√©tat "buff√©" d'un ennemi doivent √™tre communiqu√©s clairement par des descriptions dans l'UI et des retours visuels en jeu. Sans cela, le joueur pourrait ne pas comprendre l'int√©r√™t de cette nouvelle tour.</p>
            </div>
        </div>
    </div>
</body>
</html>
